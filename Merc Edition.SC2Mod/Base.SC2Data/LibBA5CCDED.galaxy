include "TriggerLibs/NativeLib"
include "TriggerLibs/CampaignLib"

include "LibBA5CCDED_h"

//--------------------------------------------------------------------------------------------------
// Library: Merc Edition Data
//--------------------------------------------------------------------------------------------------
// External Library Initialization
void libBA5CCDED_InitLibraries () {
    libNtve_InitVariables();
    libCamp_InitVariables();
}

// Functions
void libBA5CCDED_gf_Taldarimify (playergroup lp_players) {
    // Variable Declarations
    int lv_player;

    // Automatic Variable Declarations
    playergroup autoBB968618_g;

    // Variable Initialization

    // Implementation
    autoBB968618_g = lp_players;
    lv_player = -1;
    while (true) {
        lv_player = PlayerGroupNextPlayer(autoBB968618_g, lv_player);
        if (lv_player < 0) { break; }
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "ColossusTal", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "NexusForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "GatewayForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "DarkShrineForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "FleetBeaconForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "StargateForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "TwilightCouncilForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "RoboticsBayForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "RoboticsFacilityForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "AssimilatorForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "TemplarArchiveForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "CyberneticsCoreForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "ShieldBatteryForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "PhotonCannonForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "ForgeForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "PylonForged", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "ZealotTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "WarpPrismTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "VoidRayTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "StalkerTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "SentryTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "ProbeTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "PhoenixTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "ObserverTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "MothershipTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "ImmortalTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "HighTemplarTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "DarkTemplarTaldarim", true);
        libNtve_gf_PlayerApplySkinReplacingExistingUnit(lv_player, "CarrierTaldarim", true);
        PlayerSetColorIndex(lv_player, 1, true);
    }
}

// Triggers
//--------------------------------------------------------------------------------------------------
// Trigger: Deposit Money
//--------------------------------------------------------------------------------------------------
bool libBA5CCDED_gt_DepositMoney_Func (bool testConds, bool runActions) {
    // Automatic Variable Declarations
    unitgroup auto885A3E0A_g;
    int auto885A3E0A_u;
    unit auto885A3E0A_var;

    // Conditions
    if (testConds) {
        if (!((libCamp_gf_CurrentMap() != libCamp_ge_MapID_MapTTosh01))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    auto885A3E0A_g = UnitGroup(null, c_playerAny, RegionEntireMap(), UnitFilter((1 << c_targetFilterRawResource) | (1 << c_targetFilterHarvestableResource), 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 0);
    auto885A3E0A_u = UnitGroupCount(auto885A3E0A_g, c_unitCountAll);
    for (;; auto885A3E0A_u -= 1) {
        auto885A3E0A_var = UnitGroupUnitFromEnd(auto885A3E0A_g, auto885A3E0A_u);
        if (auto885A3E0A_var == null) { break; }
        UnitSetPropertyFixed(auto885A3E0A_var, c_unitPropResources, 5000.0);
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void libBA5CCDED_gt_DepositMoney_Init () {
    libBA5CCDED_gt_DepositMoney = TriggerCreate("libBA5CCDED_gt_DepositMoney_Func");
    TriggerAddEventMapInit(libBA5CCDED_gt_DepositMoney);
}

//--------------------------------------------------------------------------------------------------
// Trigger: War Pig - Laser Targeting System
//--------------------------------------------------------------------------------------------------
bool libBA5CCDED_gt_WarPigLaserTargetingSystem_Func (bool testConds, bool runActions) {
    // Automatic Variable Declarations
    // Actions
    if (!runActions) {
        return true;
    }

    TechTreeUpgradeAddLevel(1, "LaserTargetingSystem", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libBA5CCDED_gt_WarPigLaserTargetingSystem_Init () {
    libBA5CCDED_gt_WarPigLaserTargetingSystem = TriggerCreate("libBA5CCDED_gt_WarPigLaserTargetingSystem_Func");
    TriggerAddEventMapInit(libBA5CCDED_gt_WarPigLaserTargetingSystem);
}

void libBA5CCDED_InitTriggers () {
    libBA5CCDED_gt_DepositMoney_Init();
    libBA5CCDED_gt_WarPigLaserTargetingSystem_Init();
}

//--------------------------------------------------------------------------------------------------
// Library Initialization
//--------------------------------------------------------------------------------------------------
bool libBA5CCDED_InitLib_completed = false;

void libBA5CCDED_InitLib () {
    if (libBA5CCDED_InitLib_completed) {
        return;
    }

    libBA5CCDED_InitLib_completed = true;

    libBA5CCDED_InitLibraries();
    libBA5CCDED_InitTriggers();
}

